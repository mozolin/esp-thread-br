const GZIP_DEBUG=0;class GzipCSSLoader{constructor(){this.styles=new Map,this.isInitialized=!1}init(){this.isInitialized||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{this.loadAllStyles()})):this.loadAllStyles(),this.isInitialized=!0)}loadAllStyles(){document.querySelectorAll('\n            style[type="text/gzip"],\n            style[data-gzip],\n            link[rel="gzip/css"]\n        ').forEach((t=>{this.loadStyle(t)}))}async loadStyle(t){const e=t.id||`gzip-css-${Date.now()}`;try{let i;if("STYLE"===t.tagName){const e=t.textContent.trim();i=await this.decompressAsync(e)}else{const e=t.getAttribute("href");i=await this.loadExternalCSS(e)}this.applyStyle(i,e),t.setAttribute("data-loaded","true")}catch(e){0,this.handleError(e,t)}}async decompressAsync(t){return new Promise(((e,i)=>{try{const i=atob(t),s=new Uint8Array(i.length);for(let t=0;t<i.length;t++)s[t]=i.charCodeAt(t);e(pako.inflate(s,{to:"string"}))}catch(t){i(t)}}))}async loadExternalCSS(t){const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=await e.arrayBuffer(),s=new Uint8Array(i);return pako.inflate(s,{to:"string"})}applyStyle(t,e){const i=document.createElement("style");i.textContent=`/* Decompressed: ${e} */\n${t}`,i.setAttribute("data-gzip-original-id",e),document.head.appendChild(i),this.styles.set(e,i)}handleError(t,e){const i=e.getAttribute("data-fallback");if(i){const t=document.createElement("link");t.rel="stylesheet",t.href=i,document.head.appendChild(t)}}removeStyle(t){const e=this.styles.get(t);e&&e.parentNode&&(e.parentNode.removeChild(e),this.styles.delete(t))}}class GzipJSLoader{constructor(){this.scripts=new Map,this.isInitialized=!1}init(){this.isInitialized||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{this.loadAllScripts()})):this.loadAllScripts(),this.isInitialized=!0)}loadAllScripts(){const t=document.querySelectorAll('script[type="text/gzip"]');0!==t.length&&t.forEach((t=>{this.loadScript(t)}))}loadScript(t){const e=t.id||`gzip-script-${Date.now()}`;try{const i=t.textContent.trim();if(!i)return void 0;const s=this.decompressGzip(i);this.executeJavaScript(s,e),t.setAttribute("data-processed","true")}catch(t){0}}decompressGzip(t){if("undefined"==typeof pako)throw new Error("Библиотека pako не подключена");const e=atob(t),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return pako.inflate(i,{to:"string"})}executeJavaScript(t,e){const i=document.createElement("script");i.textContent=`/* GzipJSLoader: ${e} */\n${t}`,i.setAttribute("data-original-id",e),i.setAttribute("data-decompressed","true"),document.head.appendChild(i),this.scripts.set(e,i)}reloadScript(t){const e=document.getElementById(t);if(e&&"text/gzip"===e.getAttribute("type")){const i=this.scripts.get(t);i&&i.parentNode&&i.parentNode.removeChild(i),this.loadScript(e)}}removeScript(t){const e=this.scripts.get(t);e&&e.parentNode&&(e.parentNode.removeChild(e),this.scripts.delete(t))}getLoadedScripts(){return Array.from(this.scripts.keys())}isScriptLoaded(t){return this.scripts.has(t)}cleanup(){this.scripts.forEach(((t,e)=>{t.parentNode&&t.parentNode.removeChild(t)})),this.scripts.clear(),this.isInitialized=!1}}const gzipCSSLoader=new GzipCSSLoader;gzipCSSLoader.init();const gzipJSLoader=new GzipJSLoader;gzipJSLoader.init();